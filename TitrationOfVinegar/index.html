<!DOCTYPE html>
<!--
View the Running Project at
https://intermezzio.github.io/ChemistryLabs/PreparingAndDilutingSolutions/
-->
<html>
<head>
	<title>Titration of Vinegar</title>
	<link rel="shortcut icon" href="..\flags_ora_icon.ico">
	<link href="https://fonts.googleapis.com/css?family=Quattrocento|Quattrocento+Sans" rel="stylesheet">
	<!-- import LaTeX -->
	<style type="text/css">
		body, input, button {
			background-color: #D0FFFD;
			font-family: 'Quattrocento', sans-serif;
		}
		a {
			color: black;
			text-decoration: none;
			font-style: italic;
		}
		input {
			border: 1px solid darkgray;
			text-align: center;
		}
		table {
			border: 2px solid blue;
			text-align: center;
			width: 100%;
			margin-top: 20px;
		}
		table td {
			padding: 10px;
			text-align: center;
		}
		table thead {
			background-color: lightgray;
		}
		table tbody {
			background-color: lightgreen;
		}
		input {
			width: 90%;
		}
		.center {
			text-align: center;
		}
		.head {
			text-align: center;
		}
		.header, thead {
			font-weight: bold;
			min-width: 150px;
		}
		.leftCol {
			font-weight: bold;
		}
		#submit {
			background-color: lightgray;
			color: black;
			font-weight: bold;
			font-size: 1em;
			border: 2px solid blue;
			margin: 10px auto;
			padding: 10px 50px;
			text-align: center;
		}
		#submit:hover {
			background-color: lightgreen;
		}
		#summ td, #raw td {
			width: 20%;
		}
		#molarity {
			margin: 10px auto;
			width: 30%;
			float: right;
		}
		#addRow {
			float: left;
		}
		#delRow {
			float: right;
		}
		.row {
			font: 14px "Quattrocento";
			border: 1px solid blue;
			border-radius: 5px;
			margin: 10px 25px;
			padding: 5px 10px;
		}
		.row:hover {
			background-color: blue;
			color: white;
		}
	</style>
</head>
<body>
	<h1 class="head"><a href="titration-of-vinegar.pdf">Titration of Vinegar</a> Data Calculations</h1>
	<p class="head"> <!--
		This takes in the data from your lab and does all necessary calculations.  Please note that significant figures should be calculated manually as these results are as approximate as possible.<br>If you find an error or think this site is missing something, email me at <a href="mailto:amascillaro@gmail.com">amascillaro@gmail.com</a>.  I hope this program helps!<br>-Andrew -->
	</p>
	<h2 class = "head">Enter your data here</h2>
	<table id="raw">
		<thead>
			<tr>
				<td>Trial</td>
				<td>Initial Burette Reading (mL)</td>
				<td>Final Burette Reading (mL)</td>
				<td>Initial Pipet Reading (mL)</td>
				<td>Final Pipet Reading (mL)</td>
			</tr>
		</thead>
		<tbody id="maintable">
			<tr class="in">
				<td class="header">1</td>
				<td><input type="number" name=""></td>
				<td><input type="number" name=""></td>
				<td><input type="number" name=""></td>
				<td><input type="number" name=""></td>
			</tr>
			<tr class="in">
				<td class="header">2</td>
				<td><input type="number" name=""></td>
				<td><input type="number" name=""></td>
				<td><input type="number" name=""></td>
				<td><input type="number" name=""></td>
			</tr>
			<tr class="in">
				<td class="header">3</td>
				<td><input type="number" name=""></td>
				<td><input type="number" name=""></td>
				<td><input type="number" name=""></td>
				<td><input type="number" name=""></td>
			</tr>
		</tbody>
	</table>
	<table id="molarity">
		<thead class="header">
			<tr>
				<td>Molarity of \(NaOH\) (M)</td>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td><input type="number" name="" value="0.1401" id="molar"></td>
			</tr>
		</tbody>
	</table>
	<button id="addRow" class="row" onclick = "addRow();">+ Add Row</button>
	<button id="delRow" class="row" onclick = "delRow();">- Delete Row</button>
<div class="center"><button id="submit" onclick="submit()">Calculate Data</button></div>
<div id="answer"> </div>
<script type="text/javascript">
	var datatable = document.getElementById("maintable");
	var answer = document.getElementById("answer");
	var dataset = [];
	var molar = 0;
	var molz = [];
	var vinvol = [];
	var acmolr = [];
	var tests = 3;
	console.log("Â¡Hi, my friend!");
	var submit = function() {
		dataset.length = 0;
		for(var i = 0; i < tests; i++) {
				dataset.push(Array());
		}
		molar = parseFloat(document.getElementById("molar").value);
		for(var i = 0; i < tests; i++) {
			row = document.querySelector("#maintable tr:nth-of-type(" + (i+1) + ")" );
			for(var j = 0; j < 4; j++) {
				dataset[i][j] = parseFloat(row.querySelector("td:nth-of-type(" + (j+2) + ") input").value) || 0.;
			}
			molz[i] = (dataset[i][3] - dataset[i][2])
		}
		console.log(molar + "M");
		console.log(dataset);

		//-------------------------------------------------------------------------------------------------------//

		for(var i = 0; i < tests; i++) {
			molz[i] = (dataset[i][3] - dataset[i][2]) * molar / 1000;
		}
		console.log("Moles NaOH:\n" + molz);

		for(var i = 0; i < tests; i++) {
			vinvol[i] = (dataset[i][1] - dataset[i][0]) * molar / 1000;
		}
		console.log("Volume of Vinegar:\n" + vinvol);

		for(var i = 0; i < tests; i++) {
			acmolr[i] = (molz[i] / vinvol[i] * 1000) || "Error";
		}
		console.log("Molarity of C2H3O2:\n" + acmolr);

		printstuff();
	}

	var addRow = function() {
		var rowText = '<td class="header">' + (tests+1) + '</td><td><input type="number" name=""></td><td><input type="number" name=""></td><td><input type="number" name=""></td><td><input type="number" name=""></td>';
		var newRow = document.createElement("tr");
		newRow.classList.add("in");
		newRow.innerHTML = rowText;
		tests++;
		datatable.appendChild(newRow);
	}
	var delRow = function() {
		maintable.removeChild(maintable.querySelector("tr:nth-last-of-type(1)"));
		tests--;
	}

	var printstuff = function() {
		answer.innerHTML = "";
		summ = document.createElement("table");
		summ.innerHTML += "<thead><tr><td>Trial</td><td>Moles of \\(NaOH\\) (mol)</td><td>Moles of \\(C_{2}H_{3}O_{2}\\) (mol)</td><td>Volume of Vinegar (mL)</td><td>Molarity of \\(C_{2}H_{3}O_{2}\\) (M)</td></tr></thead>";
		summ.id = "summ";
		tbody = document.createElement("tbody");
		for(var i = 0; i < tests; i++) {
			datRow = document.createElement("tr");
			datRow.innerHTML = "<td>"+(i+1)+"</td><td>"+molz[i]+"</td><td>"+molz[i]+"</td><td>"+vinvol[i]+"</td><td>"+acmolr[i]+"</td>";
			tbody.appendChild(datRow);
		}
		summ.appendChild(tbody);
		answer.appendChild(summ);
		MathJax.Hub.Queue(["Typeset",MathJax.Hub,answer]);
	}

	// in case anyone types in the console
	var iloveyou = "I love you too!";
	var hello = "Hi!";
	var ddg = "Yes!";
	var hack = function() {
		printstuff();
		return "you did it";
	}
</script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML'></script>
</body>
</html>